<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Digital Library — Showcase</title>
  <style>
    :root{
      --bg:#0f1113; --panel:#121316; --muted:#9aa3ad; --accent:#6ee7b7; --glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#070708);color:#e6eef3}
    .wrap{max-width:1100px;margin:32px auto;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#5bd6ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#041014}
    h1{margin:0;font-size:22px}
    p.lead{color:var(--muted);margin:6px 0 0}

    .grid{display:grid;grid-template-columns:1fr 420px;gap:24px;margin-top:22px}

    .panel{background:var(--panel);padding:18px;border-radius:12px}
    .small{font-size:13px;color:var(--muted)}

    .features{display:flex;flex-direction:column;gap:12px}
    .feature{display:flex;gap:12px;align-items:flex-start}
    .feature svg{flex:0 0 36px}

    pre{background:rgba(0,0,0,0.25);padding:12px;border-radius:8px;overflow:auto;color:#d6f3ea}
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;font-size:13px}

    .demo-actions{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
    button{background:#0c0d0e;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer}
    button.secondary{color:var(--muted);background:transparent}

    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:10px 8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03);font-size:14px}
    th{color:var(--muted);font-size:13px}
    .muted{color:var(--muted)}

    .notice{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-left:4px solid #f2c94c;padding:10px;border-radius:8px;color:var(--muted);}

    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

    @media (max-width:980px){.grid{grid-template-columns:1fr} .logo{width:54px;height:54px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">DL</div>
      <div>
        <h1>Digital - Library</h1>
        <p class="lead">A simple local library app (Flask backend + Tkinter GUI). This page documents the project and includes a small browser demo that talks to your running backend.</p>
      </div>
    </header>

    <div class="grid">
      <div>
        <section class="panel">
          <h3>What this project does</h3>
          <p class="small">A tiny CRUD media library saved to <code>media.json</code>. The Python backend exposes REST endpoints and the original frontend is a Tkinter desktop GUI. This site helps showcase and quickly test the API from your browser.</p>

          <div style="height:12px"></div>

          <div class="features">
            <div class="feature">
              <svg viewBox="0 0 24 24" width="36" height="36" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 6v6l4 2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="3" y="3" width="18" height="18" rx="2" stroke-linecap="round" stroke-linejoin="round"></rect></svg>
              <div>
                <strong>Persistent storage</strong>
                <div class="small">Items are stored in <code>media.json</code> and persisted across runs.</div>
              </div>
            </div>

            <div class="feature">
              <svg viewBox="0 0 24 24" width="36" height="36" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 7h18" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 7v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7" stroke-linecap="round" stroke-linejoin="round"></path></svg>
              <div>
                <strong>Simple API</strong>
                <div class="small">GET/POST/DELETE endpoints for easy integration.</div>
              </div>
            </div>

            <div class="feature">
              <svg viewBox="0 0 24 24" width="36" height="36" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 10a1 1 0 0 0-1-1h-3V6a3 3 0 0 0-3-3H10a3 3 0 0 0-3 3v3H4a1 1 0 0 0-1 1v8a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-8z"></path></svg>
              <div>
                <strong>Tkinter UI included</strong>
                <div class="small">A desktop GUI that consumes the same API — perfect for local-only use.</div>
              </div>
            </div>
          </div>
        </section>

        <section class="panel" style="margin-top:16px">
          <h3>How to run the project (quick)</h3>
          <ol class="small">
            <li>Make sure Python 3.8+ is installed.</li>
            <li>Install dependencies: <code>pip install flask requests</code>. (Optional: <code>pip install flask-cors</code> for browser demo)</li>
            <li>Start the app: <code>python your_app.py</code> — the Flask backend runs at <code>http://127.0.0.1:5000</code>.</li>
            <li>Open the Tkinter GUI that starts automatically in the same script.</li>
          </ol>

          <div style="margin-top:8px" class="notice">
            If you want the browser demo below to talk to the Flask server, enable CORS in the backend. Add these two lines after creating <code>app = Flask(__name__)</code>:
            <pre><code>from flask_cors import CORS
CORS(app)</code></pre>
          </div>
        </section>

        <section class="panel" style="margin-top:16px">
          <h3>API — quick reference</h3>
          <table>
            <thead><tr><th>Method</th><th>Endpoint</th><th>Notes</th></tr></thead>
            <tbody>
              <tr><td class="muted">GET</td><td><code>/media</code></td><td>List all items</td></tr>
              <tr><td class="muted">GET</td><td><code>/media/category/&lt;category&gt;</code></td><td>Filter by category (Book, Movie, Magazine)</td></tr>
              <tr><td class="muted">GET</td><td><code>/media/search?name=...</code></td><td>Search by exact name</td></tr>
              <tr><td class="muted">POST</td><td><code>/media</code></td><td>Create new item — JSON: <code>{name,author,date,category}</code></td></tr>
              <tr><td class="muted">DELETE</td><td><code>/media/&lt;id&gt;</code></td><td>Delete by id</td></tr>
            </tbody>
          </table>

          <div style="margin-top:8px" class="small">
            Example <strong>curl</strong> create request:
            <pre><code>curl -X POST http://127.0.0.1:5000/media -H "Content-Type: application/json" -d '{"name":"Dune","author":"Frank Herbert","date":"1965","category":"Book"}'</code></pre>
          </div>
        </section>
      </div>

      <aside>
        <div class="panel">
          <h3>Live browser demo</h3>
          <p class="small">This tries to interact with your running Flask backend at <code>http://127.0.0.1:5000</code>. If you see CORS errors, enable CORS as shown above.</p>

          <div class="demo-actions">
            <button id="btn-load">Load All</button>
            <button id="btn-books" class="secondary">Books</button>
            <button id="btn-search" class="secondary">Search "Dune"</button>
            <button id="btn-new">Add demo item</button>
          </div>

          <div id="demo-msg" class="small muted">Ready.</div>

          <table id="demo-table" style="margin-top:12px;display:none">
            <thead><tr><th>Name</th><th>Author</th><th>Date</th><th>Category</th></tr></thead>
            <tbody></tbody>
          </table>

          <div style="margin-top:12px" class="small">If you want to delete an item with JS, open the console and call <code>deleteItem('&lt;id&gt;')</code>.</div>
        </div>

        <div class="panel" style="margin-top:14px">
          <h4>Troubleshooting</h4>
          <ul class="small">
            <li>Make sure the Flask server runs at <code>http://127.0.0.1:5000</code>.</li>
            <li>If fetch fails with <code>TypeError: Failed to fetch</code>, check CORS or that the server is running.</li>
            <li>Data lives in <code>media.json</code> in the same folder as the script.</li>
          </ul>
        </div>

      </aside>
    </div>

    <footer class="small">Built to showcase your Flask + Tkinter library. You can copy this file (index.html) and open it in your browser.</footer>
  </div>

  <script>
    const API = 'http://127.0.0.1:5000';
    const msg = document.getElementById('demo-msg');
    const table = document.getElementById('demo-table');
    const tbody = table.querySelector('tbody');

    function setMsg(t){msg.textContent = t}
    function showRows(items){
      tbody.innerHTML='';
      if(!items || items.length===0){table.style.display='none'; setMsg('No items'); return}
      table.style.display='table';
      items.forEach(it=>{
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${escapeHtml(it.name||'')}</td><td>${escapeHtml(it.author||'')}</td><td>${escapeHtml(it.date||'')}</td><td>${escapeHtml(it.category||'')}</td>`;
        tbody.appendChild(tr);
      })
      setMsg(`Loaded ${items.length} items.`)
    }

    function escapeHtml(s){return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c])}

    async function loadAll(){
      setMsg('Loading...');
      try{
        const res = await fetch(API + '/media');
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        showRows(data);
      }catch(e){
        console.error(e);
        setMsg('Error: ' + (e.message || e));
        table.style.display='none';
      }
    }

    async function loadCategory(cat){
      setMsg('Loading...');
      try{
        const res = await fetch(API + '/media/category/' + encodeURIComponent(cat));
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        showRows(data);
      }catch(e){console.error(e); setMsg('Error: '+e.message); table.style.display='none'}
    }

    async function searchName(name){
      setMsg('Searching...')
      try{
        const res = await fetch(API + '/media/search?name=' + encodeURIComponent(name));
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        if(Object.keys(data).length===0){ setMsg('No result'); table.style.display='none'; return }
        showRows([data]);
      }catch(e){console.error(e); setMsg('Error: '+e.message); table.style.display='none'}
    }

    async function addDemo(){
      setMsg('Adding demo item...')
      try{
        const payload = {name:'Demo Book '+Date.now(), author:'Web Demo', date:new Date().toISOString().slice(0,10), category:'Book'};
        const res = await fetch(API + '/media', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        setMsg('Added: ' + data.name);
        loadAll();
      }catch(e){console.error(e); setMsg('Error: '+e.message)}
    }

    async function deleteItem(id){
      setMsg('Deleting...')
      try{
        const res = await fetch(API + '/media/' + id, {method:'DELETE'});
        if(!res.ok) throw new Error('HTTP '+res.status);
        setMsg('Deleted'); loadAll();
      }catch(e){console.error(e); setMsg('Error: '+e.message)}
    }

    document.getElementById('btn-load').addEventListener('click', loadAll);
    document.getElementById('btn-books').addEventListener('click', ()=>loadCategory('Book'));
    document.getElementById('btn-search').addEventListener('click', ()=>searchName('Dune'));
    document.getElementById('btn-new').addEventListener('click', addDemo);

    // Auto-try load once on open
    (async ()=>{ try{ await loadAll(); }catch(e){} })();
  </script>
</body>
</html>